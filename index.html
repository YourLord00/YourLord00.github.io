<!DOCTYPE html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Final Project for CS498 - Data Visualization </title>
        <link href="./css/style.css" rel="stylesheet">
        <script src='https://d3js.org/d3.v5.min.js'></script>
        <script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>

</head>
    
    <body onload='init()'>
        <header>
			<nav>
				<ul>
                    <li id="title">CS - Final Project</li>
					<li><a href="index.html">Home</a></li>
                    <li><a href="Scene2.html">Scene2</a></li>
                    <li><a href="Scene3.html">Scene3</a></li>
                    <li><a href="tooltipSample.html">Reference</a></li>
				</ul>      
			</nav>
		</header>

        <div class="container">
            <div class="page-header">
                <h1>Number of Cylinders impacts the performance of Auto-mobiles</h1>
            </div>
            <p>
                According to University of California, Irvine Auto Data Set including multi data set and attribute
                Characteristics, a research that how does the <b>cylinders</b> have impact on the performance of cars has been investigated in City of United States of America.
            </p>
            <div class ="text-center">
                <a href="http://archive.ics.uci.edu/ml/datasets/Auto+MPG">http://archive.ics.uci.edu/ml/datasets/Auto+MPG</a>
            </div>

            <p class="caseDescription">
                Automobiles' displacement is largely effected by the number of cylinders which car has. Based on the statistic data set from U.S. City
                automobiles with more cylinders have a tremendous increasement on the car displacement
            </p>

            <svg></svg>
            <div class="special">
            <p>From the chart, there is an explicit evidence indicates that automobiles with three cylinders has a much more low
            displacement with those with eight cylinders</p>
            </div>
            <p class="authorLed">
            </p>
        </div>

        <footer class="footer">
            <div class="container">
                <p class="text-muted"></p>
                <strong>Author <a href="https://www.linkedin.com/in/jiachun-tang-mastercomputerscience/" target="_blank">Jiachun Tang</a></strong>
                <br><a data-toggle="modal" data-target="#myModal" href="Auto.csv/">DataSet Reference From UCI</a>
            </div>
        </footer>



        <div class="container" id="aboutVisualization" style="padding-bottom: 30px;">
            <div id="homepageID">About the Visualization, Reference</div>
            <div class="panel">
                <h3>Visualization Narrative</h3>
                <p class="lead"></p>
                <p class="lead">The project follows the <strong>interative slideshow</strong> narrative visualization structure.
                    The <strong>Home</strong> represents the base of what is the visualization structure. The user is being prompted and led
                    to the author driven content and will be led through two additional scenes representing stem. In each scene, user is welcome
                    to explore specific data point on the graph with detailed corresponded datum, which means that users can decided to do whether they are going to <strong>drill down</strong> into details in a slide
                </p>
                <p class="lead">
                    Each scence contains <strong>regarding the Visualization </strong> section at the bottom of the page.
                    So that the reader could read more and learn more about the how is the scenes, triggers, annotations and paramters for that particular page.
                </p>
                <h3>Narrative Structure</h3>
                <p class="lead">There are three scenes in the narrative visualization. They follow the same template and layout for visual consistency.
                    The title fixed at the very top of the html page, above the visualization container for the duration of the narrative visualization.
                    The scenes is consistent with the flow to keep the reader from getting disoriented through transitions.
                    The order of scene is consistent with are chosed with the basis of the categorical varibale attached with automobile, which are displacement, horsepower, acceleration
                    The visualization container which displays the data and is consistent with height 500px, width 1000px,
                    the background is set to white ,and the fills and strike also are painted with black.
                    The scatterplot has the consistency with the legend and axes for the duration of the narrative visualization. The data has been concluded with the axes.
                    The annotation and each of marks's color also are have consistency during the whole narrative visualization.

                </p>

                <h3>Scene</h3>
                <p class="lead">In order to find the conclusions of the survey research on the number of cylinders and
                    the overall performance of the car, the three most critical aspects are listed for comparison, based on the correlation of
                    car performance.Consequently they are displacement, horsepower, and acceleration. These three scenarios were investigated separately. The correlation
                    between the number of car cylinders and each of them, from positive to negative related scene change state.
                </p>
                <p class="lead">The menu items in the navigation bar of each page enables the User Interface events.
                    User interacts by clicking on the button or menu items to navigate to various part of this story.
                    The mouse hover is another user interface event. The hover event allows proper positioning of the tooltip.
                    As mouse moves from one bar to another, changes in X and Y position causes opacity to
                    revert back to its original state in the previous bar and change in the new bar.
                </p>


                <h3>Annotations</h3>
                <p class="lead">The annotation is provided by the legend on the top right of the chart with fixed boxes and a tooltip when mouse is hovered over different scatterplot in the chart.
                    Addtionally, the legend and labels along the X and Y axis provides additional annotations for the chart.
                </p>
                <h3>Triggers</h3>
                <p class="lead">In the navigation bar, the mouse click acts as a trigger event.
                    The mouse hover (mouseover) event is a trigger for the tooltip in the bar chart.
                    The highlighted icon in the navigation bar and colored buttons,relative the whole body, with
                    icons and the text-style words telling(Ex. Scene2, Secene3) provide the visual clues about the user actions triggers to the user.
                </p>

                <h3>Parameters</h3>
                <p class="lead">Parameters are used for the users explore and get more details in the narative visualization.
                    The types of parameters engaged in the visualization is the number of cylinders Users will have the ability
                    to examine the data with specifi deatils for each vehicle they are looking at every time("Three Cylinder unit car", "Four Cylinder unit car",
                    "Five Cylinder unit car", "Six Cylinder unit car", "Eight Cylinder unit car").
                    By doing this, users could know more details on the scatterplot which they are looking at, and then
                    they can compare with other circle ,whiling looking the Y-axis and X-axis to get their own more details
                    result and answer.
                    The current state is under control of the parameter automobile "cylinders". When users mouseover to a single data point
                    belonging to that vehicle's data, the cylinders, the current state will changes. Then the data points belonging to it will become stroke whitesmoke
                    and opacity set to 1,from opacity 0.3
                    Consequently this allows user can communicate with the associated data by mouseover action.
                </p>

                <strong>Additional Note </strong>
                <ul>
                    <p class="lead">Below are Online Code Reference</p>
                <a href="https://d3-graph-gallery.com/graph/interactivity_tooltip.html">Tool-tip</a>
                <a href="https://chartio.com/resources/tutorials/how-to-show-data-on-mouseover-in-d3js/#creating-a-tooltip-using-mouseover-events">User action</a>
                <a href="https://www.w3schools.com/css/css_font.asp">Css control</a>
                <a href="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js">D3-Annotation Tutorial</a>
                </ul>


            </div>

        </div>

    </body>

    <script>

        async function init() {
            const data = await d3.csv('Auto.csv');


            /*below is circle text annotation on-mouse*/


            var margin = 50
            var width = 400
            var height = 400
            let ScaleX = d3.scaleLinear().domain([0,10]).range([0,width])
            let ScaleY = d3.scaleLinear().domain([0,500]).range([height,0])

            var tooltip = d3.select("body")
                .append("div")
                .data(data)
                .style("position", "absolute")
                .style("z-index", "10")
                .style("visibility", "hidden")
                .attr("fill","black")

            var palette = ["rgb(61,255,51)", "rgb(255, 234, 51)",   "rgb(61,255,51)", "rgb(190,255,51)", "rgb(255,187,51)","rgb(255,126,51)", "rgb(255,51,51)", "rgb(255,51,51)",  "#53736A"]

            var annotations = [
                {
                    note: {
                        label: "There is a trend when the cylinders get growth then the car's displacement climbs",
                        title: "Discovery"
                    },
                    x: 210,
                    y: 90,
                    dx: -50,
                    dy:-20,

                }];

            var makeAnnotations = d3.annotation().annotations(annotations);

            d3.select("svg")
                .append("g")
                .attr("transform", "translate("+(1000-width)/2+","+margin+")")
                .style("font-size", "78%")
                .call(makeAnnotations);

            d3.select('svg')
                .append('g')
                .attr("transform", "translate("+(1000-width)/2+","+margin+")")
                .selectAll('circle').data(data)
                .enter()
                .append('circle')
                .attr("cx", (d,i) => ScaleX(data[i].cylinders))
                .attr("cy", (d,i) => ScaleY(data[i].displacement))
                .attr("r", 7)
                .attr("fill", (d,i) => palette[data[i].cylinders-1])
                .on("mouseover", (d) => {
                    tooltip.style("visibility", "visible");
                    tooltip.text("The number of cylinders is " + d.cylinders + " ,and the auto displacement is " + d.displacement+ " cc");
                })
                .on("mousemove", (d) => {
                    tooltip.style("top", (event.pageY-10)+"px").style("left", (event.pageX+10)+"px");
                })
                .on("mouseout", (d) => {
                    tooltip.style("visibility", "hidden");
                });

            var y_axis = d3.axisLeft(ScaleY)
                .tickValues([100, 200,300,400,500])  //setting tick values
                .tickFormat(d3.format('~s'));   //setting tick format

            d3.select("svg")
                .append("g")
                .attr("transform", "translate("+(1000-width)/2+","+margin+")")
                .call(y_axis)
                .append("text")
                        .attr("fill","black")
                        .attr("class", "label")
                        .attr("transform", "rotate(-90)")
                        .attr("y", 7)
                        .attr("dy", ".71em")
                        .style("text-anchor", "end")
                        .text("Auto displacement in cc")

            var x_axis = d3.axisBottom(ScaleX)
                .tickValues([0,3,4,5,6,8,10])  //setting tick values
                .tickFormat(d3.format("~s"));   //setting tick format

            d3.select("svg")
                .append("g")
                .attr("transform", "translate("+(1000-width)/2+","+(height+margin)+")")
                .call(x_axis)
                .append("text")
                        .attr("fill","black")
                        .attr("class", "label")
                        .attr("x", width)
                        .attr("y", -6)
                        .style("text-anchor", "end")
                        .text("The Number of Cylinder (unit)");

            //////////////below is little tag
            let palette_legend = ["rgb(61,255,51)", "rgb(190,255,51)", "rgb(255,187,51)", "rgb(255,126,51)", "rgb(255,51,51)"];
            d3.select("svg")
                .append('g')
                .selectAll('rect').data(palette_legend)
                .enter()
                .append('rect')
                .attr("x", 700)
                .attr("y", (d, i) => 50 + 15*i)
                .attr("fill", (d, i) => d)
                .attr("width", 18)
                .attr("height", 10)
            let legend_text = ["Three Cylinder unit car", "Four Cylinder unit car",
                "Five Cylinder unit car", "Six Cylinder unit car", "Eight Cylinder unit car"];
            d3.select("svg")
                .append('g')
                .selectAll('rect').data(legend_text)
                .enter()
                .append('text')
                .attr("fill","black")
                .attr("class", "label")
                .attr("x", 730)
                .attr("y", (d,i) => 56 + 16*i)
                .attr("alignment-baseline","middle")
                .style("font-size", "0.7em")
                .style("text-anchor", "left")
                .text((d,i) => d);
        }
    </script>

</html>